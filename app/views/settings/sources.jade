extends layout

block inner-content
	- contentFor('javascripts', '<script type="text/javascript" src="/socket.io/socket.io.js"></script>')
	- contentFor('javascripts', javascriptIncludeTag('vendor/jquery/jquery.waitforimages-1.4.2.min'))
	- contentFor('javascripts', javascriptIncludeTag('vendor/jquery/jquery.colorbox-min'))
	- contentFor('javascripts', javascriptIncludeTag('admin_sources'))

	h2 VPForums.org

	div.data.vpf.tables(ng-controller='DataCtrl')

		//- pager
		pager.pagination.pagination-small.pull-right(page='page', pages='numpages')

		//- number of rows
		numrows.numrows.input-mini.pull-right(selection='[10, 20, 30]', value='limit')

		//- search box
		searchbox(value='search', wait='300')

		//- sort pills
		ul.nav.nav-pills.pull-left.sort
			li
				.icon
					i.icon.sort(title="Sort results by")
			li.current(data-sort="latest")
				a(href="#") Latest
			li(data-sort="downloads")
				a(href="#") By Downloads
			li(data-sort="views")
				a(href="#") By Views

		.clearfix
		.wrapper.ng-cloak(resource='VPForums.FindTables')
			ul.thumbnails
				li.span6.vpf.item(ng-repeat='row in data', data-id="{{row.fileId}}")
					.thumbnail
						thumb.ng-transclude(fileid="{{row.fileId}}")
						h3 {{row.title_trimmed}}
						p.pull-right.updated.hidden-phone-small {{row.lastUpdateRel}}
						h4.hidden-phone-small {{row.info}}
						ul.pills.small
							li
								i.icon.user
								.author.hidden-phone-small {{row.author}}
							li
								i.icon.circle-arrow-down(title="{{row.downloads}}")
								span.hidden-desktop-small.hidden-phone-small {{row.downloads}}
							li
								i.icon.eye(title="{{row.views}}")
								span.hidden-desktop-small.hidden-phone-small {{row.views}}
							li.link
								a(href="http://www.vpforums.org/index.php?app=downloads&showfile={{row.fileId}}", target="_blank")
									i.icon.link
							li.link.transfer
								a(href="#")
									i.icon.download-alt
						.clearfix

		div.noresult(style='display:none')
			p No results found.
			button.btn.fat.small Clear Filters

	div.empty(style='display:none')
		p
			| No index found. Click below to fetch the file index which takes a few minutes. <br>Data will
			| be automatically refreshed when done.
		button.btn.fat(data-processing='#{isDownloadingIndex}')
			i.icon.refresh
			span Download index

		.indexing.progress.progress-striped.active(style='display:none')
			.bar

	.clearfix

block modals
	.modal-alert.modal.hide.fade.download-table
		button.close(data-dismiss='modal') &times;
		div.modal-header
			h2
				img
				i.icon.download-alt
				span Download Table
		.clearfix
		div.modal-body
			h3 When finished downloading:
			form
				fieldset
					label.checkbox
						input.btn(type="checkbox", name="dlrom", checked)
						| Find and download needed ROMs
					label.checkbox
						input.btn(type="checkbox", name="dlmedia", checked)
						| Download media pack
					label.checkbox
						input.btn(type="checkbox", name="dlvideo", checked)
						| Download table video
					label.checkbox
						input.btn(type="checkbox", name="addtohp")
						| Add table to HyperPin
		div.modal-footer
			button.download.btn.btn-warning.fat.right(data-dismiss="modal") Download
			a.cancel.btn.fatlink(href='#') Cancel

block inlineScripts
	script
		$(document).ready(function() {
			menu('settings');
			submenu('sources');
		});